<div class="general-form">

    <mat-form-field class="extinguishersFormField">
      <input matInput placeholder="Nro de matafuego" [formControl]="extinguisherNo" type="number">
      <mat-error *ngIf="extinguisherNo.hasError('required')">
        El nro de matafuego es <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <mat-select placeholder="Marca" [formControl]="mark">
        <mat-option *ngFor="let markx of marks | async" value="{{markx.name}}">{{markx.name}}</mat-option>
      </mat-select>
      <mat-error *ngIf="mark.hasError('required')">
        La marca es <strong>obligatoria</strong>
      </mat-error>
    </mat-form-field>
  
    <app-custom-select 
      [service]="customerService"
      [key]="'id'" 
      [label]="'name'" 
      [placeholder]="'Cliente'" 
      [inputPlaceholder]="'Escriba para filtrar'"
      [force]="true" 
      [selected]="customerId"
      (selectChange)="selectCustomer($event)"
      class="extinguishersFormField">
    </app-custom-select>

    <!-- <mat-form-field class="extinguishersFormField">
      <mat-select placeholder="Cliente" [(value)]="customerId">
        <mat-option *ngFor="let c of customers" value="{{c.id}}" disabled="{{c.deleted}}">{{c.name}}</mat-option>
      </mat-select>
    </mat-form-field> -->

    <mat-form-field class="extinguishersFormField">
      <mat-select placeholder="Tipo" [(value)]="typeId">
        <mat-option *ngFor="let type of extinguisherTypes" value="{{type.id}}" disabled="{{type.deleted}}">{{type.category}} - {{type.volume}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <mat-select placeholder="Categoría" [(value)]="category">
        <mat-option *ngFor="let categ of categories()" value="{{categ}}">{{categ}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField" *ngIf="category == 'VEHICULAR'">
      <input matInput placeholder="Patente" [(ngModel)]="carID">
    </mat-form-field>

    <mat-form-field class="extinguishersFormField" *ngIf="category == 'DOMICILIARIO'">
      <input matInput placeholder="Centro de costo" [formControl]="costCenter" type="string">
    </mat-form-field>
  
    <mat-form-field class="extinguishersFormField" *ngIf="category == 'DOMICILIARIO'">
      <input matInput placeholder="Ubicación" [formControl]="location" type="string">
      <mat-error *ngIf="location.hasError('required')">
        La ubicación es <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField" *ngIf="category == 'DOMICILIARIO'">
      <input matInput placeholder="Nro de ubicación" [formControl]="locationNo" type="number">
    </mat-form-field>
  
    <mat-form-field class="extinguishersFormField" *ngIf="category == 'DOMICILIARIO'">
      <input matInput placeholder="Dirección" [formControl]="address" type="string">
      <mat-error *ngIf="address.hasError('required')">
        La dirección de <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>
  
    <mat-form-field class="extinguishersFormField" *ngIf="category == 'DOMICILIARIO'">
      <input matInput placeholder="Nro de BV" [formControl]="bvNo" type="number">
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <input matInput placeholder="Fabricación" [formControl]="manufacturing" type="date">
      <mat-error *ngIf="manufacturing.hasError('required')">
        La fecha de fabricación es <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <input matInput placeholder="Ultima carga" [formControl]="lastLoad" type="date">
      <mat-error *ngIf="lastLoad.hasError('required')">
        La fecha de última carga es <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <input matInput placeholder="Ultima PH" [formControl]="lastHydraulicTest" type="date">
      <mat-error *ngIf="lastHydraulicTest.hasError('required')">
        La fecha de última PH es <strong>obligatorio</strong>
      </mat-error>
    </mat-form-field>

    <mat-form-field class="extinguishersFormField">
      <input matInput placeholder="DPS" readonly="true" type="string" [value]="dps">
    </mat-form-field>
    
    <div class="div-button-actions">
      <button mat-raised-button class="button-actions" color="primary" (click)="save()">Guardar</button>
      <button mat-raised-button class="button-actions" color="warn" (click)="cancel()">Cancelar</button>
    </div>
  </div>